@model RecoreForm

<h1>@Model.FormName</h1>
<div id="app">
    <form class="" id="form">
        @foreach (var field in Model.Fields)
    {
        switch (field.FieldType)
        {
            case "text":
                <text-field label="@field.Label" name="@field.Name" v-bind:fielddata="model.@field.Field" v-on:recorechange="model.@field.Field = $event"></text-field>
            break;
        case "number":
            <div class="form-group"><label for="@field.Name">@field.Label</label><input class="form-control" type="number" id="@field.Name" /></div>
        break;
}
}
        <button class="btn btn-default" id="button" v-on:click="SubmitForm">Save</button>
    </form>
</div>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script type="text/javascript">
    Vue.component('text-field', {
        props: ['label', 'name', 'fielddata'],
        template: '<div class="form-group"><label v-bind:for="name">{{label}}</label><input class="form-control" type ="text" v-bind:id="name" v-bind:value="fielddata" v-on:input="$emit(\'recorechange\', $event.target.value)"/></div>'
    });
    var app = new Vue({
        el: "#app",
        data: {
            fields: [
                @foreach (var item in Model.Fields)
                {
                    <text>
                    {
                        field: '@item.Field',
                        name: '@item.Name'
                    },
                    </text>
                }
            ],
            recordType:'@Model.RecordType', 
            recordId: '@ViewData["id"]',
            model: {},
        },
        methods: {
            SubmitForm() {
                    var request = new XMLHttpRequest();
                    if (this.recordId == '') {
                        request.open("POST", "/data/" + this.recordType + "/");
                    }
                    else {
                        request.open("PATCH", "/data/" + this.recordType + "/" + this.recordId + "/");
                    }
                    request.setRequestHeader("Content-Type", "application/json");
                    request.onload = function () {
                        if (request.status >= 200 && request.status < 300) {
                            if (this.recordId === '') {
                                this.recordId = JSON.parse(request.responseText);
                            }
                            window.location.href="/Form/@Model.FormId/" + this.recordId
                        }
                        else {
                            alert(request.responseText);
                        }
                    }
                    var send = {};
                    this.fields.forEach(function (field) {
                        send[field.field] = app.model[field.field];
                    });
                    request.send(JSON.stringify({ Data: send }));
            },
            GetFormFields() {
                var output = [];
                this.fields.forEach(function (field) {
                    if (output.indexOf(field.field) == -1) {
                        output.push(field.field);
                    }
                });
                return output;
            },
            LoadForm() {
                var request = new XMLHttpRequest();
                request.open("GET", "/data/" + this.recordType + "/" + this.recordId + "?columns=" + this.GetFormFields().join(","));
                request.onload = function () {
                    if (request.status >= 200 && request.status < 300) {
                        app.model = JSON.parse(request.responseText).data;
                    }
                    else {
                        alert(request.responseText);
                    }

                }
                request.send();
            }
        },
        mounted: function () {
            if (this.recordId != '') {
                this.LoadForm();
            }
        },
    });
</script>